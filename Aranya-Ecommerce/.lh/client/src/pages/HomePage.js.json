{
    "sourceFile": "client/src/pages/HomePage.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 8,
            "patches": [
                {
                    "date": 1752985187061,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1752985200359,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -158,8 +158,9 @@\n                 <img\r\n                   src={`/api/v1/product/product-photo/${p._id}`}\r\n                   className=\"card-img-top\"\r\n                   alt={p.name}\r\n+                  loading=\"lazy\"\r\n                 />\r\n                 <div className=\"card-body\">\r\n                   <div className=\"card-name-price\">\r\n                     <h5 className=\"card-title\">{p.name}</h5>\r\n"
                },
                {
                    "date": 1752985396687,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -106,9 +106,9 @@\n       console.log(error);\r\n     }\r\n   };\r\n   return (\r\n-    <Layout title={\"ALl Products - Best offers \"}>\r\n+    <Layout title={\"All Products - Best offers \"}>\r\n       {/* banner image */}\r\n       <img\r\n         src=\"/images/banner.jpg\"\r\n         className=\"banner-img\"\r\n"
                },
                {
                    "date": 1752986119301,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -7,8 +7,9 @@\n import toast from \"react-hot-toast\";\r\n import Layout from \"./../components/Layouts/Layout\";\r\n import { AiOutlineReload } from \"react-icons/ai\";\r\n import \"../styles/Homepage.css\";\r\n+import ProductSkeleton from \"../components/Loader/ProductSkeleton\";\r\n \r\n const HomePage = () => {\r\n   const navigate = useNavigate();\r\n   const [cart, setCart] = useCart();\r\n"
                },
                {
                    "date": 1752986222067,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -18,9 +18,9 @@\n   const [checked, setChecked] = useState([]);\r\n   const [radio, setRadio] = useState([]);\r\n   const [total, setTotal] = useState(0);\r\n   const [page, setPage] = useState(1);\r\n-  const [loading, setLoading] = useState(false);\r\n+  const [loading, setLoading] = useState(true);\r\n \r\n   //get all cat\r\n   const getAllCategory = async () => {\r\n     try {\r\n"
                },
                {
                    "date": 1752987007133,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -32,22 +32,18 @@\n       console.log(error);\r\n     }\r\n   };\r\n \r\n-  useEffect(() => {\r\n-    getAllCategory();\r\n-    getTotal();\r\n-  }, []);\r\n   //get products\r\n   const getAllProducts = async () => {\r\n     try {\r\n       setLoading(true);\r\n       const { data } = await axios.get(`/api/v1/product/product-list/${page}`);\r\n+      setProducts(data.products);\r\n       setLoading(false);\r\n-      setProducts(data.products);\r\n     } catch (error) {\r\n+      console.log(error);\r\n       setLoading(false);\r\n-      console.log(error);\r\n     }\r\n   };\r\n \r\n   //getTOtal COunt\r\n@@ -59,8 +55,14 @@\n       console.log(error);\r\n     }\r\n   };\r\n \r\n+ useEffect(() => {\r\n+   getAllCategory();\r\n+   getTotal();\r\n+   getAllProducts();\r\n+ }, []);\r\n+\r\n   useEffect(() => {\r\n     if (page === 1) return;\r\n     loadMore();\r\n   }, [page]);\r\n@@ -68,10 +70,11 @@\n   const loadMore = async () => {\r\n     try {\r\n       setLoading(true);\r\n       const { data } = await axios.get(`/api/v1/product/product-list/${page}`);\r\n+      setProducts((prev) => [...prev, ...data.products]);\r\n       setLoading(false);\r\n-      setProducts([...products, ...data?.products]);\r\n+      // setProducts([...products, ...data?.products]);\r\n     } catch (error) {\r\n       console.log(error);\r\n       setLoading(false);\r\n     }\r\n@@ -102,10 +105,12 @@\n         checked,\r\n         radio,\r\n       });\r\n       setProducts(data?.products);\r\n+      setLoading(false);\r\n     } catch (error) {\r\n       console.log(error);\r\n+      setLoading(false);\r\n     }\r\n   };\r\n   return (\r\n     <Layout title={\"All Products - Best offers \"}>\r\n@@ -152,8 +157,12 @@\n           </div>\r\n         </div>\r\n         <div className=\"col-md-9 \">\r\n           <h1 className=\"text-center\">All Products</h1>\r\n+\r\n+          {loading ? (\r\n+            <ProductSkeleton cards={8} />\r\n+          ) : (\r\n           <div className=\"d-flex flex-wrap\">\r\n             {products?.map((p) => (\r\n               <div className=\"card m-2\" key={p._id}>\r\n                 <img\r\n@@ -199,10 +208,12 @@\n                 </div>\r\n               </div>\r\n             ))}\r\n           </div>\r\n+          )}\r\n+\r\n           <div className=\"m-2 p-3\">\r\n-            {products && products.length < total && (\r\n+            {products.length < total && (\r\n               <button\r\n                 className=\"btn loadmore\"\r\n                 onClick={(e) => {\r\n                   e.preventDefault();\r\n@@ -212,9 +223,9 @@\n                 {loading ? (\r\n                   \"Loading ...\"\r\n                 ) : (\r\n                   <>\r\n-                    {\" \"}\r\n+                    {/* {\" \"} */}\r\n                     Loadmore <AiOutlineReload />\r\n                   </>\r\n                 )}\r\n               </button>\r\n"
                },
                {
                    "date": 1752996541628,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -112,9 +112,15 @@\n       setLoading(false);\r\n     }\r\n   };\r\n   return (\r\n-    <Layout title={\"All Products - Best offers \"}>\r\n+    // <Layout title={\"All Products - Best offers \"}>\r\n+    <Layout\r\n+  title={\"Aranya - All Products | Eco-Friendly & Biodegradable\"}\r\n+  description={\"Discover premium biodegradable notebooks, tableware, and more. Sustainable products for a better future from Aranya.\"}\r\n+  keywords={\"biodegradable, eco-friendly, notebooks, tableware, aranya products, sustainable living\"}\r\n+  author={\"Krishna Kumar\"}\r\n+>\r\n       {/* banner image */}\r\n       <img\r\n         src=\"/images/banner.jpg\"\r\n         className=\"banner-img\"\r\n"
                },
                {
                    "date": 1752996944604,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,8 +8,10 @@\n import Layout from \"./../components/Layouts/Layout\";\r\n import { AiOutlineReload } from \"react-icons/ai\";\r\n import \"../styles/Homepage.css\";\r\n import ProductSkeleton from \"../components/Loader/ProductSkeleton\";\r\n+import { LazyLoadImage } from \"react-lazy-load-image-component\";\r\n+import \"react-lazy-load-image-component/src/effects/blur.css\";\r\n \r\n const HomePage = () => {\r\n   const navigate = useNavigate();\r\n   const [cart, setCart] = useCart();\r\n"
                },
                {
                    "date": 1752997001318,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -122,9 +122,9 @@\n   keywords={\"biodegradable, eco-friendly, notebooks, tableware, aranya products, sustainable living\"}\r\n   author={\"Krishna Kumar\"}\r\n >\r\n       {/* banner image */}\r\n-      <img\r\n+      <LazyLoadImage\r\n         src=\"/images/banner.jpg\"\r\n         className=\"banner-img\"\r\n         alt=\"bannerimage\"\r\n         width={\"100%\"}\r\n"
                }
            ],
            "date": 1752985187061,
            "name": "Commit-0",
            "content": "import React, { useState, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { Checkbox, Radio } from \"antd\";\r\nimport { Prices } from \"../components/Prices\";\r\nimport { useCart } from \"../context/cart\";\r\nimport axios from \"axios\";\r\nimport toast from \"react-hot-toast\";\r\nimport Layout from \"./../components/Layouts/Layout\";\r\nimport { AiOutlineReload } from \"react-icons/ai\";\r\nimport \"../styles/Homepage.css\";\r\n\r\nconst HomePage = () => {\r\n  const navigate = useNavigate();\r\n  const [cart, setCart] = useCart();\r\n  const [products, setProducts] = useState([]);\r\n  const [categories, setCategories] = useState([]);\r\n  const [checked, setChecked] = useState([]);\r\n  const [radio, setRadio] = useState([]);\r\n  const [total, setTotal] = useState(0);\r\n  const [page, setPage] = useState(1);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  //get all cat\r\n  const getAllCategory = async () => {\r\n    try {\r\n      const { data } = await axios.get(\"/api/v1/category/get-category\");\r\n      if (data?.success) {\r\n        setCategories(data?.category);\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    getAllCategory();\r\n    getTotal();\r\n  }, []);\r\n  //get products\r\n  const getAllProducts = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const { data } = await axios.get(`/api/v1/product/product-list/${page}`);\r\n      setLoading(false);\r\n      setProducts(data.products);\r\n    } catch (error) {\r\n      setLoading(false);\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  //getTOtal COunt\r\n  const getTotal = async () => {\r\n    try {\r\n      const { data } = await axios.get(\"/api/v1/product/product-count\");\r\n      setTotal(data?.total);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (page === 1) return;\r\n    loadMore();\r\n  }, [page]);\r\n  //load more\r\n  const loadMore = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const { data } = await axios.get(`/api/v1/product/product-list/${page}`);\r\n      setLoading(false);\r\n      setProducts([...products, ...data?.products]);\r\n    } catch (error) {\r\n      console.log(error);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // filter by cat\r\n  const handleFilter = (value, id) => {\r\n    let all = [...checked];\r\n    if (value) {\r\n      all.push(id);\r\n    } else {\r\n      all = all.filter((c) => c !== id);\r\n    }\r\n    setChecked(all);\r\n  };\r\n  useEffect(() => {\r\n    if (!checked.length || !radio.length) getAllProducts();\r\n  }, [checked.length, radio.length]);\r\n\r\n  useEffect(() => {\r\n    if (checked.length || radio.length) filterProduct();\r\n  }, [checked, radio]);\r\n\r\n  //get filterd product\r\n  const filterProduct = async () => {\r\n    try {\r\n      const { data } = await axios.post(\"/api/v1/product/product-filters\", {\r\n        checked,\r\n        radio,\r\n      });\r\n      setProducts(data?.products);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n  return (\r\n    <Layout title={\"ALl Products - Best offers \"}>\r\n      {/* banner image */}\r\n      <img\r\n        src=\"/images/banner.jpg\"\r\n        className=\"banner-img\"\r\n        alt=\"bannerimage\"\r\n        width={\"100%\"}\r\n        loading=\"lazy\"\r\n      />\r\n      {/* banner image */}\r\n      <div className=\"container-fluid row mt-3 home-page\">\r\n        <div className=\"col-md-3 filters\">\r\n          <h4 className=\"text-center\">Filter By Category</h4>\r\n          <div className=\"d-flex flex-column\">\r\n            {categories?.map((c) => (\r\n              <Checkbox\r\n                key={c._id}\r\n                onChange={(e) => handleFilter(e.target.checked, c._id)}\r\n              >\r\n                {c.name}\r\n              </Checkbox>\r\n            ))}\r\n          </div>\r\n          {/* price filter */}\r\n          <h4 className=\"text-center mt-4\">Filter By Price</h4>\r\n          <div className=\"d-flex flex-column\">\r\n            <Radio.Group onChange={(e) => setRadio(e.target.value)}>\r\n              {Prices?.map((p) => (\r\n                <div key={p._id}>\r\n                  <Radio value={p.array}>{p.name}</Radio>\r\n                </div>\r\n              ))}\r\n            </Radio.Group>\r\n          </div>\r\n          <div className=\"d-flex flex-column\">\r\n            <button\r\n              className=\"btn btn-danger\"\r\n              onClick={() => window.location.reload()}\r\n            >\r\n              RESET FILTERS\r\n            </button>\r\n          </div>\r\n        </div>\r\n        <div className=\"col-md-9 \">\r\n          <h1 className=\"text-center\">All Products</h1>\r\n          <div className=\"d-flex flex-wrap\">\r\n            {products?.map((p) => (\r\n              <div className=\"card m-2\" key={p._id}>\r\n                <img\r\n                  src={`/api/v1/product/product-photo/${p._id}`}\r\n                  className=\"card-img-top\"\r\n                  alt={p.name}\r\n                />\r\n                <div className=\"card-body\">\r\n                  <div className=\"card-name-price\">\r\n                    <h5 className=\"card-title\">{p.name}</h5>\r\n                    <h5 className=\"card-title card-price\">\r\n                      {p.price.toLocaleString(\"en-US\", {\r\n                        style: \"currency\",\r\n                        currency: \"INR\",\r\n                      })}\r\n                    </h5>\r\n                  </div>\r\n                  <p className=\"card-text \">\r\n                    {p.description.substring(0, 60)}...\r\n                  </p>\r\n                  <div className=\"card-name-price\">\r\n                    <button\r\n                      className=\"btn btn-info ms-1\"\r\n                      onClick={() => navigate(`/product/${p.slug}`)}\r\n                    >\r\n                      More Details\r\n                    </button>\r\n                    <button\r\n                      className=\"btn btn-dark ms-1\"\r\n                      onClick={() => {\r\n                        setCart([...cart, p]);\r\n                        localStorage.setItem(\r\n                          \"cart\",\r\n                          JSON.stringify([...cart, p])\r\n                        );\r\n                        toast.success(\"Item Added to cart\");\r\n                      }}\r\n                    >\r\n                      ADD TO CART\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n          <div className=\"m-2 p-3\">\r\n            {products && products.length < total && (\r\n              <button\r\n                className=\"btn loadmore\"\r\n                onClick={(e) => {\r\n                  e.preventDefault();\r\n                  setPage(page + 1);\r\n                }}\r\n              >\r\n                {loading ? (\r\n                  \"Loading ...\"\r\n                ) : (\r\n                  <>\r\n                    {\" \"}\r\n                    Loadmore <AiOutlineReload />\r\n                  </>\r\n                )}\r\n              </button>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default HomePage;"
        }
    ]
}