{
    "sourceFile": "client/src/pages/Admin/AdminOrders.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1752985232153,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1752985232153,
            "name": "Commit-0",
            "content": "import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport toast from \"react-hot-toast\";\r\nimport AdminMenu from \"../../components/Layouts/AdminMenu\";\r\nimport Layout from \"../../components/Layouts/Layout\";\r\nimport { useAuth } from \"../../context/auth\";\r\nimport moment from \"moment\";\r\nimport { Select } from \"antd\";\r\nconst { Option } = Select;\r\n\r\nconst AdminOrders = () => {\r\n  const [status, setStatus] = useState([\r\n    \"Not Process\",\r\n    \"Processing\",\r\n    \"Shipped\",\r\n    \"deliverd\",\r\n    \"cancel\",\r\n  ]);\r\n  const [changeStatus, setChangeStatus] = useState(\"\");\r\n  const [orders, setOrders] = useState([]);\r\n  const [auth, setAuth] = useAuth();\r\n  const getOrders = async () => {\r\n    try {\r\n      const { data } = await axios.get(\"/api/v1/auth/all-orders\");\r\n      setOrders(data);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (auth?.token) getOrders();\r\n  }, [auth?.token]);\r\n\r\n  const handleChange = async (orderId, value) => {\r\n    try {\r\n      const { data } = await axios.put(`/api/v1/auth/order-status/${orderId}`, {\r\n        status: value,\r\n      });\r\n      getOrders();\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n  return (\r\n    <Layout title={\"All Orders Data\"}>\r\n      <div className=\"row dashboard\">\r\n        <div className=\"col-md-3\">\r\n          <AdminMenu />\r\n        </div>\r\n        <div className=\"col-md-9\">\r\n          <h1 className=\"text-center\">All Orders</h1>\r\n          {orders?.map((o, i) => {\r\n            return (\r\n              <div className=\"border shadow\">\r\n                <table className=\"table\">\r\n                  <thead>\r\n                    <tr>\r\n                      <th scope=\"col\">#</th>\r\n                      <th scope=\"col\">Status</th>\r\n                      <th scope=\"col\">Buyer</th>\r\n                      <th scope=\"col\"> date</th>\r\n                      <th scope=\"col\">Payment</th>\r\n                      <th scope=\"col\">Quantity</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    <tr>\r\n                      <td>{i + 1}</td>\r\n                      <td>\r\n                        <Select\r\n                          bordered={false}\r\n                          onChange={(value) => handleChange(o._id, value)}\r\n                          defaultValue={o?.status}\r\n                        >\r\n                          {status.map((s, i) => (\r\n                            <Option key={i} value={s}>\r\n                              {s}\r\n                            </Option>\r\n                          ))}\r\n                        </Select>\r\n                      </td>\r\n                      <td>{o?.buyer?.name}</td>\r\n                      <td>{moment(o?.createAt).fromNow()}</td>\r\n                      <td>{o?.payment.success ? \"Success\" : \"Failed\"}</td>\r\n                      <td>{o?.products?.length}</td>\r\n                    </tr>\r\n                  </tbody>\r\n                </table>\r\n                <div className=\"container\">\r\n                  {o?.products?.map((p, i) => (\r\n                    <div className=\"row mb-2 p-3 card flex-row\" key={p._id}>\r\n                      <div className=\"col-md-4\">\r\n                        <img\r\n                          src={`/api/v1/product/product-photo/${p._id}`}\r\n                          className=\"card-img-top\"\r\n                          alt={p.name}\r\n                          width=\"100px\"\r\n                          height={\"100px\"}\r\n                          loading=\"lazy\"\r\n                        />\r\n                      </div>\r\n                      <div className=\"col-md-8\">\r\n                        <p>{p.name}</p>\r\n                        <p>{p.description.substring(0, 30)}</p>\r\n                        <p>Price : {p.price}</p>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default AdminOrders;"
        }
    ]
}